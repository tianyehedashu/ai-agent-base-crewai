# å¯¹è¯å¼ Agent ç¼–æ’ç³»ç»Ÿ

**ç”¨è‡ªç„¶è¯­è¨€å¯¹è¯æ¥åˆ›å»ºã€ä¿®æ”¹ã€æµ‹è¯•å’Œå‘å¸ƒ Agent**

## 1. æ ¸å¿ƒç†å¿µ

### 1.1 è®¾è®¡å“²å­¦

```
ä¼ ç»Ÿæ–¹å¼                           å¯¹è¯å¼ç¼–æ’
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ‰“å¼€å¯è§†åŒ–ç¼–è¾‘å™¨                   ğŸ’¬ "æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªé”€å”®åˆ†æ Agent"
    â†“                                  â†“
æ‹–æ‹½ç»„ä»¶                           ğŸ¤– "å¥½çš„ï¼å®ƒéœ€è¦åšä»€ä¹ˆï¼Ÿ"
    â†“                                  â†“
å¡«å†™è¡¨å•                           ğŸ’¬ "åˆ†ææœ€è¿‘30å¤©çš„é”€å”®æ•°æ®ï¼Œæ‰¾å‡ºç•…é”€äº§å“"
    â†“                                  â†“
é…ç½®å·¥å…·                           ğŸ¤– "æ˜ç™½äº†ï¼æ•°æ®ä»å“ªé‡Œæ¥ï¼Ÿ"
    â†“                                  â†“
è¿æ¥ç»„ä»¶                           ğŸ’¬ "æœ¬åœ°æ•°æ®åº“"
    â†“                                  â†“
ç‚¹å‡»æµ‹è¯•                           ğŸ¤– "å·²åˆ›å»ºï¼è¦æµ‹è¯•å—ï¼Ÿ"
    â†“                                  â†“
ç‚¹å‡»å‘å¸ƒ                           ğŸ’¬ "æµ‹è¯•ä¸€ä¸‹"
                                      â†“
                                   ğŸ¤– "æµ‹è¯•å®Œæˆï¼è¦å‘å¸ƒå—ï¼Ÿ"
                                      â†“
                                   ğŸ’¬ "å‘å¸ƒ"
                                      â†“
                                   ğŸ¤– "å·²å‘å¸ƒï¼å¯ä»¥ä½¿ç”¨äº†"

æ­¥éª¤: 10+                          æ­¥éª¤: 5ä¸ªå¯¹è¯
æ—¶é—´: 10-20åˆ†é’Ÿ                    æ—¶é—´: 2-3åˆ†é’Ÿ
```

### 1.2 æ ¸å¿ƒèƒ½åŠ›

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å¯¹è¯å¼ Agent ç¼–æ’ç³»ç»Ÿ                           â”‚
â”‚                                                              â”‚
â”‚  ğŸ’¬ è‡ªç„¶è¯­è¨€åˆ›å»º                                             â”‚
â”‚     â€¢ ç”¨å¯¹è¯æè¿°éœ€æ±‚                                         â”‚
â”‚     â€¢ AI è‡ªåŠ¨ç”Ÿæˆé…ç½®                                        â”‚
â”‚     â€¢ å®æ—¶ç¡®è®¤å’Œè°ƒæ•´                                         â”‚
â”‚                                                              â”‚
â”‚  âœï¸ å¯¹è¯å¼ä¿®æ”¹                                               â”‚
â”‚     â€¢ "æŠŠæ—¶é—´èŒƒå›´æ”¹æˆ60å¤©"                                   â”‚
â”‚     â€¢ "æ·»åŠ ä¸€ä¸ªé‚®ä»¶é€šçŸ¥"                                     â”‚
â”‚     â€¢ "å»æ‰äººå·¥å®¡æ‰¹ç¯èŠ‚"                                     â”‚
â”‚                                                              â”‚
â”‚  ğŸ§ª å¯¹è¯å¼æµ‹è¯•                                               â”‚
â”‚     â€¢ "æµ‹è¯•ä¸€ä¸‹"                                             â”‚
â”‚     â€¢ "ç”¨åº—é“ºAçš„æ•°æ®è¯•è¯•"                                    â”‚
â”‚     â€¢ "çœ‹çœ‹ç»“æœå¯¹ä¸å¯¹"                                       â”‚
â”‚                                                              â”‚
â”‚  ğŸš€ å¯¹è¯å¼å‘å¸ƒ                                               â”‚
â”‚     â€¢ "å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ"                                       â”‚
â”‚     â€¢ "åˆ†äº«ç»™å›¢é˜Ÿ"                                           â”‚
â”‚     â€¢ "è®¾ç½®å®šæ—¶æ‰§è¡Œ"                                         â”‚
â”‚                                                              â”‚
â”‚  ğŸ”„ ç‰ˆæœ¬ç®¡ç†                                                 â”‚
â”‚     â€¢ "å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬"                                       â”‚
â”‚     â€¢ "çœ‹çœ‹ä¿®æ”¹å†å²"                                         â”‚
â”‚     â€¢ "å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬"                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. å¯¹è¯å¼åˆ›å»ºæµç¨‹

### 2.1 å®Œæ•´å¯¹è¯ç¤ºä¾‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ Agent ç¼–æ’åŠ©æ‰‹                              [æ–°å»º] [æˆ‘çš„]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ‘¤ ä½ : æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªé”€å”®åˆ†æ Agent                           â”‚
â”‚                                                              â”‚
â”‚  ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼è®©æˆ‘å¸®ä½ åˆ›å»ºä¸€ä¸ªé”€å”®åˆ†æ Agentã€‚            â”‚
â”‚                                                              â”‚
â”‚  è¯·å‘Šè¯‰æˆ‘ï¼š                                                  â”‚
â”‚  1. å®ƒå…·ä½“è¦åšä»€ä¹ˆåˆ†æï¼Ÿ                                     â”‚
â”‚  2. æ•°æ®ä»å“ªé‡Œæ¥ï¼Ÿ                                           â”‚
â”‚  3. éœ€è¦ç”Ÿæˆä»€ä¹ˆæ ·çš„è¾“å‡ºï¼Ÿ                                   â”‚
â”‚                                                              â”‚
â”‚  æˆ–è€…ä½ å¯ä»¥ç›´æ¥æè¿°ï¼Œæˆ‘ä¼šè‡ªåŠ¨ç†è§£ ğŸ˜Š                         â”‚
â”‚                                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘¤ ä½ : åˆ†ææœ€è¿‘30å¤©çš„é”€å”®æ•°æ®ï¼Œæ‰¾å‡ºç•…é”€äº§å“ï¼Œæ•°æ®åœ¨æœ¬åœ°    â”‚
â”‚       MySQLæ•°æ®åº“ï¼Œæœ€åç”Ÿæˆä¸€ä»½æŠ¥å‘Š                         â”‚
â”‚                                                              â”‚
â”‚  ğŸ¤– åŠ©æ‰‹: æ˜ç™½äº†ï¼æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ª Agent é…ç½®ï¼š          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“Š é”€å”®åˆ†æ Agent                                 â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  ğŸ¤– Agent 1: æ•°æ®æ”¶é›†å‘˜                            â”‚    â”‚
â”‚  â”‚     â€¢ è§’è‰²: æ•°æ®åˆ†æå¸ˆ                             â”‚    â”‚
â”‚  â”‚     â€¢ ä»»åŠ¡: ä» MySQL æ•°æ®åº“æ”¶é›†æœ€è¿‘30å¤©çš„é”€å”®æ•°æ®  â”‚    â”‚
â”‚  â”‚     â€¢ å·¥å…·: MySQL æŸ¥è¯¢å·¥å…·                         â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  ğŸ¤– Agent 2: æ•°æ®åˆ†æå¸ˆ                            â”‚    â”‚
â”‚  â”‚     â€¢ è§’è‰²: é”€å”®åˆ†æä¸“å®¶                           â”‚    â”‚
â”‚  â”‚     â€¢ ä»»åŠ¡: åˆ†ææ•°æ®ï¼Œè¯†åˆ«ç•…é”€äº§å“                 â”‚    â”‚
â”‚  â”‚     â€¢ å·¥å…·: æ•°æ®åˆ†æå·¥å…·ã€å›¾è¡¨ç”Ÿæˆ                 â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  ğŸ¤– Agent 3: æŠ¥å‘Šç”Ÿæˆå™¨                            â”‚    â”‚
â”‚  â”‚     â€¢ è§’è‰²: æŠ¥å‘Šæ’°å†™ä¸“å®¶                           â”‚    â”‚
â”‚  â”‚     â€¢ ä»»åŠ¡: ç”Ÿæˆé”€å”®åˆ†ææŠ¥å‘Š                       â”‚    â”‚
â”‚  â”‚     â€¢ å·¥å…·: æ–‡æ¡£ç”Ÿæˆå·¥å…·                           â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  æ‰§è¡Œæµç¨‹: é¡ºåºæ‰§è¡Œ                                â”‚    â”‚
â”‚  â”‚  é¢„è®¡è€—æ—¶: ~30ç§’                                   â”‚    â”‚
â”‚  â”‚  é¢„è®¡æˆæœ¬: ~$0.10                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  è¿™æ ·å¯ä»¥å—ï¼Ÿä½ å¯ä»¥è¯´ï¼š                                      â”‚
â”‚  â€¢ "å¯ä»¥ï¼Œæµ‹è¯•ä¸€ä¸‹"                                          â”‚
â”‚  â€¢ "ä¿®æ”¹ä¸€ä¸‹..." (å‘Šè¯‰æˆ‘è¦æ”¹ä»€ä¹ˆ)                           â”‚
â”‚  â€¢ "æ·»åŠ ..." (å‘Šè¯‰æˆ‘è¦æ·»åŠ ä»€ä¹ˆ)                             â”‚
â”‚  â€¢ "çœ‹çœ‹è¯¦ç»†é…ç½®"                                            â”‚
â”‚                                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘¤ ä½ : æ·»åŠ ä¸€ä¸ªäººå·¥å®¡æ‰¹ç¯èŠ‚ï¼Œåœ¨ç”ŸæˆæŠ¥å‘Šä¹‹å‰                 â”‚
â”‚                                                              â”‚
â”‚  ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼æˆ‘å·²ç»æ·»åŠ äº†äººå·¥å®¡æ‰¹ç¯èŠ‚ï¼š                   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“Š é”€å”®åˆ†æ Agent (å·²æ›´æ–°)                        â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  ğŸ¤– Agent 1: æ•°æ®æ”¶é›†å‘˜                            â”‚    â”‚
â”‚  â”‚  ğŸ¤– Agent 2: æ•°æ®åˆ†æå¸ˆ                            â”‚    â”‚
â”‚  â”‚  â¸ï¸  äººå·¥å®¡æ‰¹: ç¡®è®¤åˆ†æç»“æœ                        â”‚    â”‚
â”‚  â”‚  ğŸ¤– Agent 3: æŠ¥å‘Šç”Ÿæˆå™¨                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  ç°åœ¨ä¼šåœ¨ç”ŸæˆæŠ¥å‘Šå‰ç­‰å¾…ä½ çš„ç¡®è®¤ã€‚æ»¡æ„å—ï¼Ÿ                   â”‚
â”‚                                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘¤ ä½ : å¯ä»¥ï¼Œæµ‹è¯•ä¸€ä¸‹                                       â”‚
â”‚                                                              â”‚
â”‚  ğŸ¤– åŠ©æ‰‹: å¼€å§‹æµ‹è¯•...                                        â”‚
â”‚                                                              â”‚
â”‚  â³ [10:30:01] æ•°æ®æ”¶é›†å‘˜æ­£åœ¨å·¥ä½œ...                         â”‚
â”‚     â””â”€ è¿æ¥ MySQL æ•°æ®åº“                                    â”‚
â”‚     â””â”€ æŸ¥è¯¢æœ€è¿‘30å¤©æ•°æ®                                     â”‚
â”‚  âœ… [10:30:05] æ”¶é›†åˆ° 1,250 æ¡é”€å”®è®°å½•                      â”‚
â”‚                                                              â”‚
â”‚  â³ [10:30:06] æ•°æ®åˆ†æå¸ˆæ­£åœ¨åˆ†æ...                         â”‚
â”‚     â””â”€ è®¡ç®—é”€é‡æ’å                                         â”‚
â”‚     â””â”€ ç”Ÿæˆè¶‹åŠ¿å›¾è¡¨                                         â”‚
â”‚  âœ… [10:30:12] åˆ†æå®Œæˆ                                     â”‚
â”‚                                                              â”‚
â”‚  ğŸ“Š åˆ†æç»“æœé¢„è§ˆï¼š                                           â”‚
â”‚  â€¢ ç•…é”€äº§å“ TOP 5                                            â”‚
â”‚  â€¢ é”€é‡å¢é•¿ 15%                                              â”‚
â”‚  â€¢ å®¢å•ä»· $48.6                                              â”‚
â”‚                                                              â”‚
â”‚  â¸ï¸  ç­‰å¾…ä½ çš„å®¡æ‰¹...                                         â”‚
â”‚  [æ‰¹å‡†] [æ‹’ç»] [ä¿®æ”¹]                                        â”‚
â”‚                                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘¤ ä½ : æ‰¹å‡†                                                 â”‚
â”‚                                                              â”‚
â”‚  ğŸ¤– åŠ©æ‰‹:                                                    â”‚
â”‚  â³ [10:30:20] æŠ¥å‘Šç”Ÿæˆå™¨æ­£åœ¨å·¥ä½œ...                         â”‚
â”‚  âœ… [10:30:25] æŠ¥å‘Šç”Ÿæˆå®Œæˆï¼                                â”‚
â”‚                                                              â”‚
â”‚  ğŸ“„ é”€å”®åˆ†ææŠ¥å‘Š.pdf (å·²ç”Ÿæˆ)                                â”‚
â”‚                                                              â”‚
â”‚  âœ… æµ‹è¯•æˆåŠŸï¼                                               â”‚
â”‚  â±ï¸  æ€»è€—æ—¶: 24ç§’                                            â”‚
â”‚  ğŸ’° æˆæœ¬: $0.08                                              â”‚
â”‚                                                              â”‚
â”‚  æ»¡æ„å—ï¼Ÿä½ å¯ä»¥ï¼š                                            â”‚
â”‚  â€¢ "å‘å¸ƒ" - å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ                                  â”‚
â”‚  â€¢ "å†æµ‹è¯•ä¸€æ¬¡" - ç”¨ä¸åŒæ•°æ®æµ‹è¯•                            â”‚
â”‚  â€¢ "ä¿®æ”¹..." - ç»§ç»­è°ƒæ•´é…ç½®                                 â”‚
â”‚                                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘¤ ä½ : å‘å¸ƒï¼Œå¹¶ä¸”æ¯å¤©æ—©ä¸Š9ç‚¹è‡ªåŠ¨æ‰§è¡Œ                        â”‚
â”‚                                                              â”‚
â”‚  ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼æ­£åœ¨å‘å¸ƒ...                                  â”‚
â”‚                                                              â”‚
â”‚  âœ… å·²å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ                                         â”‚
â”‚  âœ… å·²è®¾ç½®å®šæ—¶ä»»åŠ¡: æ¯å¤© 09:00 è‡ªåŠ¨æ‰§è¡Œ                      â”‚
â”‚  âœ… æŠ¥å‘Šå°†å‘é€åˆ°ä½ çš„é‚®ç®±                                     â”‚
â”‚                                                              â”‚
â”‚  ğŸ‰ å®Œæˆï¼ä½ çš„ "é”€å”®åˆ†æ Agent" å·²ç»ä¸Šçº¿äº†ï¼                 â”‚
â”‚                                                              â”‚
â”‚  Agent ID: agent_sales_analysis_001                          â”‚
â”‚  ç‰ˆæœ¬: v1.0                                                  â”‚
â”‚  åˆ›å»ºæ—¶é—´: 2024-11-07 10:30                                  â”‚
â”‚                                                              â”‚
â”‚  [æŸ¥çœ‹è¯¦æƒ…] [åˆ†äº«ç»™å›¢é˜Ÿ] [åˆ›å»ºæ–°çš„]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å¯¹è¯å¼åˆ›å»ºçš„æ ¸å¿ƒæµç¨‹

```python
from typing import Dict, List, Any
from crewai import Agent, Task, Crew
from langchain_openai import ChatOpenAI
import json

class ConversationalOrchestrator:
    """å¯¹è¯å¼ç¼–æ’å™¨"""
    
    def __init__(self):
        self.llm = ChatOpenAI(model="gpt-4", temperature=0.7)
        self.conversation_history = []
        self.current_config = {
            "name": "",
            "description": "",
            "agents": [],
            "tasks": [],
            "flows": [],
            "status": "draft"  # draft, testing, published
        }
        self.state = "initial"  # initial, configuring, testing, publishing
    
    async def chat(self, user_input: str) -> Dict[str, Any]:
        """å¤„ç†ç”¨æˆ·è¾“å…¥"""
        # 1. æ·»åŠ åˆ°å¯¹è¯å†å²
        self.conversation_history.append({
            "role": "user",
            "content": user_input,
            "timestamp": datetime.now()
        })
        
        # 2. ç†è§£ç”¨æˆ·æ„å›¾
        intent = await self._understand_intent(user_input)
        
        # 3. æ ¹æ®æ„å›¾æ‰§è¡Œæ“ä½œ
        response = await self._handle_intent(intent, user_input)
        
        # 4. è®°å½•å“åº”
        self.conversation_history.append({
            "role": "assistant",
            "content": response["message"],
            "data": response.get("data"),
            "timestamp": datetime.now()
        })
        
        return response
    
    async def _understand_intent(self, user_input: str) -> Dict:
        """ç†è§£ç”¨æˆ·æ„å›¾"""
        prompt = f"""
åˆ†æç”¨æˆ·çš„æ„å›¾ã€‚

å½“å‰çŠ¶æ€: {self.state}
å½“å‰é…ç½®: {json.dumps(self.current_config, ensure_ascii=False)}
å¯¹è¯å†å²: {self._format_history()}

ç”¨æˆ·è¾“å…¥: {user_input}

å¯èƒ½çš„æ„å›¾ç±»å‹:
1. create - åˆ›å»ºæ–°çš„ Agent
2. modify - ä¿®æ”¹ç°æœ‰é…ç½®
3. add - æ·»åŠ æ–°ç»„ä»¶
4. remove - åˆ é™¤ç»„ä»¶
5. test - æµ‹è¯• Agent
6. approve - å®¡æ‰¹æµ‹è¯•ç»“æœ
7. publish - å‘å¸ƒ Agent
8. schedule - è®¾ç½®å®šæ—¶ä»»åŠ¡
9. view - æŸ¥çœ‹è¯¦æƒ…
10. clarify - éœ€è¦æ¾„æ¸…/è¯¢é—®

è¿”å› JSON:
{{
    "intent_type": "æ„å›¾ç±»å‹",
    "confidence": 0.0-1.0,
    "entities": {{
        "target": "æ“ä½œç›®æ ‡",
        "action": "å…·ä½“åŠ¨ä½œ",
        "parameters": {{}},
    }},
    "needs_clarification": true/false,
    "clarification_question": "éœ€è¦é—®çš„é—®é¢˜ï¼ˆå¦‚æœæœ‰ï¼‰"
}}
"""
        
        response = await self.llm.apredict(prompt)
        intent = json.loads(response)
        return intent
    
    async def _handle_intent(self, intent: Dict, user_input: str) -> Dict:
        """å¤„ç†æ„å›¾"""
        intent_type = intent["intent_type"]
        
        handlers = {
            "create": self._handle_create,
            "modify": self._handle_modify,
            "add": self._handle_add,
            "remove": self._handle_remove,
            "test": self._handle_test,
            "approve": self._handle_approve,
            "publish": self._handle_publish,
            "schedule": self._handle_schedule,
            "view": self._handle_view,
            "clarify": self._handle_clarify
        }
        
        handler = handlers.get(intent_type, self._handle_unknown)
        return await handler(intent, user_input)
    
    async def _handle_create(self, intent: Dict, user_input: str) -> Dict:
        """å¤„ç†åˆ›å»ºæ„å›¾"""
        # 1. ä»ç”¨æˆ·æè¿°ä¸­ç”Ÿæˆé…ç½®
        config = await self._generate_config_from_description(user_input)
        
        # 2. æ›´æ–°å½“å‰é…ç½®
        self.current_config.update(config)
        self.state = "configuring"
        
        # 3. ç”Ÿæˆå‹å¥½çš„å“åº”
        response_message = await self._generate_config_summary(config)
        
        return {
            "message": response_message,
            "data": {
                "config": config,
                "suggestions": [
                    "å¯ä»¥ï¼Œæµ‹è¯•ä¸€ä¸‹",
                    "ä¿®æ”¹ä¸€ä¸‹...",
                    "æ·»åŠ ...",
                    "çœ‹çœ‹è¯¦ç»†é…ç½®"
                ]
            },
            "ui_action": "show_config_preview"
        }
    
    async def _generate_config_from_description(self, description: str) -> Dict:
        """ä»æè¿°ç”Ÿæˆé…ç½®"""
        prompt = f"""
æ ¹æ®ç”¨æˆ·æè¿°ï¼Œç”Ÿæˆ Crew AI Agent é…ç½®ã€‚

ç”¨æˆ·æè¿°: {description}

è¯·ç”Ÿæˆå®Œæ•´çš„é…ç½®ï¼ŒåŒ…æ‹¬:
1. Agent å®šä¹‰ï¼ˆè§’è‰²ã€ç›®æ ‡ã€å·¥å…·ï¼‰
2. Task å®šä¹‰ï¼ˆæè¿°ã€æœŸæœ›è¾“å‡ºï¼‰
3. æ‰§è¡Œæµç¨‹ï¼ˆé¡ºåºã€å¹¶è¡Œã€æ¡ä»¶ï¼‰

é…ç½®è¦æ±‚:
- Agent æ•°é‡: æ ¹æ®ä»»åŠ¡å¤æ‚åº¦å†³å®šï¼ˆ1-5ä¸ªï¼‰
- æ¯ä¸ª Agent è¦æœ‰æ˜ç¡®çš„è§’è‰²å’ŒèŒè´£
- Task è¦å…·ä½“ã€å¯æ‰§è¡Œ
- å·¥å…·è¦åŒ¹é… Agent çš„éœ€æ±‚

è¿”å› JSON æ ¼å¼çš„é…ç½®:
{{
    "name": "Agent åç§°",
    "description": "ç®€çŸ­æè¿°",
    "agents": [
        {{
            "id": "agent_1",
            "role": "è§’è‰²åç§°",
            "goal": "ç›®æ ‡æè¿°",
            "backstory": "èƒŒæ™¯æ•…äº‹",
            "tools": ["å·¥å…·1", "å·¥å…·2"]
        }}
    ],
    "tasks": [
        {{
            "id": "task_1",
            "name": "ä»»åŠ¡åç§°",
            "description": "ä»»åŠ¡æè¿°",
            "agent_id": "agent_1",
            "expected_output": "æœŸæœ›è¾“å‡º"
        }}
    ],
    "process": "sequential/parallel/hierarchical",
    "estimated_time": "é¢„è®¡è€—æ—¶ï¼ˆç§’ï¼‰",
    "estimated_cost": "é¢„è®¡æˆæœ¬ï¼ˆç¾å…ƒï¼‰"
}}
"""
        
        response = await self.llm.apredict(prompt)
        config = json.loads(response)
        return config
    
    async def _generate_config_summary(self, config: Dict) -> str:
        """ç”Ÿæˆé…ç½®æ‘˜è¦ï¼ˆå‹å¥½çš„è‡ªç„¶è¯­è¨€ï¼‰"""
        prompt = f"""
å°†é…ç½®è½¬æ¢ä¸ºå‹å¥½çš„è‡ªç„¶è¯­è¨€æè¿°ã€‚

é…ç½®: {json.dumps(config, ensure_ascii=False)}

è¦æ±‚:
1. ç”¨ç®€æ´ã€å‹å¥½çš„è¯­è¨€
2. çªå‡ºå…³é”®ä¿¡æ¯
3. ä½¿ç”¨ emoji å¢åŠ å¯è¯»æ€§
4. æä¾›ä¸‹ä¸€æ­¥å»ºè®®

ç”Ÿæˆæè¿°:
"""
        
        response = await self.llm.apredict(prompt)
        return response
    
    async def _handle_modify(self, intent: Dict, user_input: str) -> Dict:
        """å¤„ç†ä¿®æ”¹æ„å›¾"""
        # 1. ç†è§£è¦ä¿®æ”¹ä»€ä¹ˆ
        modification = await self._parse_modification(user_input)
        
        # 2. åº”ç”¨ä¿®æ”¹
        self._apply_modification(modification)
        
        # 3. ç”Ÿæˆå“åº”
        response_message = f"å¥½çš„ï¼æˆ‘å·²ç»{modification['description']}ã€‚\n\n"
        response_message += await self._generate_config_summary(self.current_config)
        
        return {
            "message": response_message,
            "data": {
                "config": self.current_config,
                "modification": modification
            },
            "ui_action": "update_config_preview"
        }
    
    async def _parse_modification(self, user_input: str) -> Dict:
        """è§£æä¿®æ”¹å†…å®¹"""
        prompt = f"""
è§£æç”¨æˆ·æƒ³è¦çš„ä¿®æ”¹ã€‚

å½“å‰é…ç½®: {json.dumps(self.current_config, ensure_ascii=False)}
ç”¨æˆ·è¾“å…¥: {user_input}

è¯·è¯†åˆ«:
1. ä¿®æ”¹ç±»å‹ï¼ˆupdate_agent, update_task, update_flow, update_parameterï¼‰
2. ä¿®æ”¹ç›®æ ‡ï¼ˆå“ªä¸ªç»„ä»¶ï¼‰
3. ä¿®æ”¹å†…å®¹ï¼ˆå…·ä½“æ”¹ä»€ä¹ˆï¼‰

è¿”å› JSON:
{{
    "type": "ä¿®æ”¹ç±»å‹",
    "target": "ä¿®æ”¹ç›®æ ‡",
    "changes": {{}},
    "description": "ä¿®æ”¹æè¿°ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰"
}}
"""
        
        response = await self.llm.apredict(prompt)
        modification = json.loads(response)
        return modification
    
    async def _handle_add(self, intent: Dict, user_input: str) -> Dict:
        """å¤„ç†æ·»åŠ æ„å›¾"""
        # 1. ç†è§£è¦æ·»åŠ ä»€ä¹ˆ
        addition = await self._parse_addition(user_input)
        
        # 2. ç”Ÿæˆæ–°ç»„ä»¶
        new_component = await self._generate_component(addition)
        
        # 3. æ·»åŠ åˆ°é…ç½®
        self._add_component(new_component)
        
        # 4. ç”Ÿæˆå“åº”
        response_message = f"å¥½çš„ï¼æˆ‘å·²ç»æ·»åŠ äº†{addition['description']}ã€‚\n\n"
        response_message += await self._generate_config_summary(self.current_config)
        
        return {
            "message": response_message,
            "data": {
                "config": self.current_config,
                "new_component": new_component
            },
            "ui_action": "update_config_preview"
        }
    
    async def _parse_addition(self, user_input: str) -> Dict:
        """è§£ææ·»åŠ å†…å®¹"""
        prompt = f"""
è§£æç”¨æˆ·æƒ³è¦æ·»åŠ çš„å†…å®¹ã€‚

å½“å‰é…ç½®: {json.dumps(self.current_config, ensure_ascii=False)}
ç”¨æˆ·è¾“å…¥: {user_input}

è¯·è¯†åˆ«:
1. æ·»åŠ ç±»å‹ï¼ˆagent, task, tool, approval, notificationï¼‰
2. æ·»åŠ ä½ç½®ï¼ˆåœ¨å“ªé‡Œæ·»åŠ ï¼‰
3. æ·»åŠ å†…å®¹ï¼ˆå…·ä½“æ˜¯ä»€ä¹ˆï¼‰

è¿”å› JSON:
{{
    "type": "æ·»åŠ ç±»å‹",
    "position": "æ·»åŠ ä½ç½®",
    "content": {{}},
    "description": "æ·»åŠ æè¿°ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰"
}}
"""
        
        response = await self.llm.apredict(prompt)
        addition = json.loads(response)
        return addition
    
    async def _handle_test(self, intent: Dict, user_input: str) -> Dict:
        """å¤„ç†æµ‹è¯•æ„å›¾"""
        # 1. æå–æµ‹è¯•å‚æ•°
        test_params = intent["entities"].get("parameters", {})
        
        # 2. æ„å»º Crew
        crew = self._build_crew_from_config(self.current_config)
        
        # 3. æ‰§è¡Œæµ‹è¯•ï¼ˆå¼‚æ­¥ï¼Œå®æ—¶è¿”å›è¿›åº¦ï¼‰
        self.state = "testing"
        
        # è¿”å›æµ‹è¯•å¼€å§‹çš„å“åº”
        return {
            "message": "å¼€å§‹æµ‹è¯•...\n\næˆ‘ä¼šå®æ—¶æ˜¾ç¤ºæ‰§è¡Œè¿›åº¦ã€‚",
            "data": {
                "test_id": f"test_{datetime.now().timestamp()}",
                "config": self.current_config
            },
            "ui_action": "start_test",
            "stream": True  # æ ‡è®°è¿™æ˜¯ä¸€ä¸ªæµå¼å“åº”
        }
        
        # æ³¨æ„ï¼šå®é™…çš„æµ‹è¯•æ‰§è¡Œä¼šåœ¨åå°è¿›è¡Œï¼Œé€šè¿‡ WebSocket å®æ—¶æ¨é€è¿›åº¦
    
    async def _handle_approve(self, intent: Dict, user_input: str) -> Dict:
        """å¤„ç†å®¡æ‰¹æ„å›¾"""
        # ç»§ç»­æµ‹è¯•æµç¨‹
        return {
            "message": "å·²æ‰¹å‡†ï¼ç»§ç»­æ‰§è¡Œ...",
            "data": {"approved": True},
            "ui_action": "continue_test"
        }
    
    async def _handle_publish(self, intent: Dict, user_input: str) -> Dict:
        """å¤„ç†å‘å¸ƒæ„å›¾"""
        # 1. æå–å‘å¸ƒå‚æ•°ï¼ˆå®šæ—¶ä»»åŠ¡ç­‰ï¼‰
        publish_params = await self._parse_publish_params(user_input)
        
        # 2. å‘å¸ƒé…ç½®
        published_info = await self._publish_config(
            self.current_config,
            publish_params
        )
        
        # 3. æ›´æ–°çŠ¶æ€
        self.state = "published"
        self.current_config["status"] = "published"
        
        # 4. ç”Ÿæˆå“åº”
        response_message = "âœ… å·²å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ\n"
        
        if publish_params.get("schedule"):
            response_message += f"âœ… å·²è®¾ç½®å®šæ—¶ä»»åŠ¡: {publish_params['schedule']}\n"
        
        if publish_params.get("notification"):
            response_message += f"âœ… æŠ¥å‘Šå°†å‘é€åˆ°{publish_params['notification']}\n"
        
        response_message += f"\nğŸ‰ å®Œæˆï¼ä½ çš„ \"{self.current_config['name']}\" å·²ç»ä¸Šçº¿äº†ï¼\n\n"
        response_message += f"Agent ID: {published_info['agent_id']}\n"
        response_message += f"ç‰ˆæœ¬: {published_info['version']}\n"
        response_message += f"åˆ›å»ºæ—¶é—´: {published_info['created_at']}\n"
        
        return {
            "message": response_message,
            "data": published_info,
            "ui_action": "show_published_info"
        }
    
    async def _parse_publish_params(self, user_input: str) -> Dict:
        """è§£æå‘å¸ƒå‚æ•°"""
        prompt = f"""
ä»ç”¨æˆ·è¾“å…¥ä¸­æå–å‘å¸ƒå‚æ•°ã€‚

ç”¨æˆ·è¾“å…¥: {user_input}

è¯·æå–:
1. schedule: å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚"æ¯å¤©9ç‚¹"ã€"æ¯å‘¨ä¸€"ï¼‰
2. notification: é€šçŸ¥æ–¹å¼ï¼ˆé‚®ç®±ã€Slackç­‰ï¼‰
3. sharing: æ˜¯å¦åˆ†äº«ç»™å›¢é˜Ÿ
4. description: å‘å¸ƒè¯´æ˜

è¿”å› JSON:
{{
    "schedule": "å®šæ—¶è¡¨è¾¾å¼ï¼ˆcron æ ¼å¼ï¼‰",
    "schedule_description": "å®šæ—¶æè¿°ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰",
    "notification": "é€šçŸ¥æ–¹å¼",
    "sharing": true/false,
    "description": "å‘å¸ƒè¯´æ˜"
}}
"""
        
        response = await self.llm.apredict(prompt)
        params = json.loads(response)
        return params
    
    async def _publish_config(self, config: Dict, params: Dict) -> Dict:
        """å‘å¸ƒé…ç½®"""
        # 1. ä¿å­˜é…ç½®åˆ°æ•°æ®åº“
        agent_id = f"agent_{config['name'].lower().replace(' ', '_')}_{int(datetime.now().timestamp())}"
        
        # 2. åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æœæœ‰ï¼‰
        if params.get("schedule"):
            await self._create_scheduled_task(agent_id, params["schedule"])
        
        # 3. è®¾ç½®é€šçŸ¥ï¼ˆå¦‚æœæœ‰ï¼‰
        if params.get("notification"):
            await self._setup_notification(agent_id, params["notification"])
        
        # 4. åˆ†äº«ç»™å›¢é˜Ÿï¼ˆå¦‚æœæœ‰ï¼‰
        if params.get("sharing"):
            await self._share_with_team(agent_id)
        
        return {
            "agent_id": agent_id,
            "version": "v1.0",
            "created_at": datetime.now().isoformat(),
            "schedule": params.get("schedule_description"),
            "notification": params.get("notification")
        }
    
    def _build_crew_from_config(self, config: Dict) -> Crew:
        """ä»é…ç½®æ„å»º Crew"""
        from crewai import Agent, Task, Crew
        
        # 1. åˆ›å»º Agents
        agents = []
        agent_map = {}
        
        for agent_config in config["agents"]:
            agent = Agent(
                role=agent_config["role"],
                goal=agent_config["goal"],
                backstory=agent_config.get("backstory", ""),
                tools=self._resolve_tools(agent_config.get("tools", [])),
                verbose=True
            )
            agents.append(agent)
            agent_map[agent_config["id"]] = agent
        
        # 2. åˆ›å»º Tasks
        tasks = []
        for task_config in config["tasks"]:
            agent = agent_map[task_config["agent_id"]]
            task = Task(
                description=task_config["description"],
                expected_output=task_config["expected_output"],
                agent=agent
            )
            tasks.append(task)
        
        # 3. åˆ›å»º Crew
        crew = Crew(
            agents=agents,
            tasks=tasks,
            process=config.get("process", "sequential"),
            verbose=True
        )
        
        return crew
    
    def _format_history(self) -> str:
        """æ ¼å¼åŒ–å¯¹è¯å†å²"""
        history = []
        for turn in self.conversation_history[-5:]:
            history.append(f"{turn['role']}: {turn['content']}")
        return "\n".join(history)
```

## 3. å¯¹è¯å¼ä¿®æ”¹

### 3.1 ä¿®æ”¹ç¤ºä¾‹

```
ğŸ‘¤ ä½ : æŠŠæ—¶é—´èŒƒå›´æ”¹æˆ60å¤©

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼å·²å°†æ—¶é—´èŒƒå›´ä»30å¤©æ”¹ä¸º60å¤©ã€‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š é”€å”®åˆ†æ Agent (å·²æ›´æ–°)                        â”‚
â”‚                                                     â”‚
â”‚  ğŸ¤– Agent 1: æ•°æ®æ”¶é›†å‘˜                            â”‚
â”‚     â€¢ ä»»åŠ¡: ä» MySQL æ”¶é›†æœ€è¿‘60å¤©çš„é”€å”®æ•°æ® âœ¨     â”‚
â”‚  ...                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

éœ€è¦é‡æ–°æµ‹è¯•å—ï¼Ÿ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : æ·»åŠ ä¸€ä¸ªé‚®ä»¶é€šçŸ¥ï¼ŒæŠŠæŠ¥å‘Šå‘ç»™æˆ‘

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼å·²æ·»åŠ é‚®ä»¶é€šçŸ¥åŠŸèƒ½ã€‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š é”€å”®åˆ†æ Agent (å·²æ›´æ–°)                        â”‚
â”‚                                                     â”‚
â”‚  ğŸ¤– Agent 1: æ•°æ®æ”¶é›†å‘˜                            â”‚
â”‚  ğŸ¤– Agent 2: æ•°æ®åˆ†æå¸ˆ                            â”‚
â”‚  â¸ï¸  äººå·¥å®¡æ‰¹                                       â”‚
â”‚  ğŸ¤– Agent 3: æŠ¥å‘Šç”Ÿæˆå™¨                            â”‚
â”‚  ğŸ“§ é‚®ä»¶é€šçŸ¥: å‘é€æŠ¥å‘Šåˆ°ä½ çš„é‚®ç®± âœ¨                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : å»æ‰äººå·¥å®¡æ‰¹ç¯èŠ‚

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼å·²ç§»é™¤äººå·¥å®¡æ‰¹ç¯èŠ‚ã€‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š é”€å”®åˆ†æ Agent (å·²æ›´æ–°)                        â”‚
â”‚                                                     â”‚
â”‚  ğŸ¤– Agent 1: æ•°æ®æ”¶é›†å‘˜                            â”‚
â”‚  ğŸ¤– Agent 2: æ•°æ®åˆ†æå¸ˆ                            â”‚
â”‚  ğŸ¤– Agent 3: æŠ¥å‘Šç”Ÿæˆå™¨                            â”‚
â”‚  ğŸ“§ é‚®ä»¶é€šçŸ¥: å‘é€æŠ¥å‘Šåˆ°ä½ çš„é‚®ç®±                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç°åœ¨ä¼šè‡ªåŠ¨æ‰§è¡Œå®Œæ•´ä¸ªæµç¨‹ã€‚è¦æµ‹è¯•å—ï¼Ÿ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : æŠŠæ•°æ®åˆ†æå¸ˆæ”¹æˆæ›´æ™ºèƒ½çš„ï¼Œèƒ½è‡ªåŠ¨å‘ç°å¼‚å¸¸

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼æˆ‘å·²ç»å¢å¼ºäº†æ•°æ®åˆ†æå¸ˆçš„èƒ½åŠ›ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– Agent 2: æ•°æ®åˆ†æå¸ˆ (å·²å¢å¼º) âœ¨                â”‚
â”‚     â€¢ è§’è‰²: é«˜çº§é”€å”®åˆ†æä¸“å®¶                       â”‚
â”‚     â€¢ ç›®æ ‡: åˆ†ææ•°æ®ï¼Œè¯†åˆ«ç•…é”€äº§å“å’Œå¼‚å¸¸æƒ…å†µ       â”‚
â”‚     â€¢ æ–°å¢èƒ½åŠ›:                                     â”‚
â”‚       - è‡ªåŠ¨æ£€æµ‹é”€é‡å¼‚å¸¸æ³¢åŠ¨                       â”‚
â”‚       - è¯†åˆ«åº“å­˜é£é™©                               â”‚
â”‚       - å‘ç°å®šä»·å¼‚å¸¸                               â”‚
â”‚     â€¢ å·¥å…·: æ•°æ®åˆ†æã€å¼‚å¸¸æ£€æµ‹ã€å›¾è¡¨ç”Ÿæˆ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç°åœ¨å®ƒä¼šè‡ªåŠ¨å‘ç°æ•°æ®ä¸­çš„å¼‚å¸¸æƒ…å†µå¹¶åœ¨æŠ¥å‘Šä¸­æ ‡æ³¨ã€‚
```

### 3.2 æ”¯æŒçš„ä¿®æ”¹ç±»å‹

```python
# ä¿®æ”¹ç±»å‹
MODIFICATION_TYPES = {
    "update_parameter": {
        "examples": [
            "æŠŠæ—¶é—´èŒƒå›´æ”¹æˆ60å¤©",
            "æ”¹æˆæ¯å‘¨æ‰§è¡Œä¸€æ¬¡",
            "ä½¿ç”¨ GPT-4 æ¨¡å‹"
        ],
        "handler": "_handle_parameter_update"
    },
    "add_component": {
        "examples": [
            "æ·»åŠ ä¸€ä¸ªé‚®ä»¶é€šçŸ¥",
            "åŠ ä¸€ä¸ªäººå·¥å®¡æ‰¹",
            "å¢åŠ ä¸€ä¸ªæ•°æ®éªŒè¯æ­¥éª¤"
        ],
        "handler": "_handle_component_addition"
    },
    "remove_component": {
        "examples": [
            "å»æ‰äººå·¥å®¡æ‰¹",
            "åˆ é™¤é‚®ä»¶é€šçŸ¥",
            "ç§»é™¤ç¬¬äºŒä¸ª Agent"
        ],
        "handler": "_handle_component_removal"
    },
    "enhance_agent": {
        "examples": [
            "è®©åˆ†æå¸ˆæ›´æ™ºèƒ½",
            "å¢å¼ºæ•°æ®æ”¶é›†èƒ½åŠ›",
            "æ”¹è¿›æŠ¥å‘Šè´¨é‡"
        ],
        "handler": "_handle_agent_enhancement"
    },
    "change_flow": {
        "examples": [
            "æ”¹æˆå¹¶è¡Œæ‰§è¡Œ",
            "è®©å‰ä¸¤æ­¥åŒæ—¶è¿›è¡Œ",
            "æ·»åŠ æ¡ä»¶åˆ†æ”¯"
        ],
        "handler": "_handle_flow_change"
    },
    "add_tool": {
        "examples": [
            "æ·»åŠ  Excel å¯¼å‡ºåŠŸèƒ½",
            "åŠ ä¸€ä¸ªå›¾è¡¨ç”Ÿæˆå·¥å…·",
            "å¢åŠ æ•°æ®åº“æŸ¥è¯¢èƒ½åŠ›"
        ],
        "handler": "_handle_tool_addition"
    }
}
```

## 4. ç‰ˆæœ¬ç®¡ç†

### 4.1 ç‰ˆæœ¬æ§åˆ¶å¯¹è¯

```
ğŸ‘¤ ä½ : çœ‹çœ‹ä¿®æ”¹å†å²

ğŸ¤– åŠ©æ‰‹: è¿™æ˜¯ "é”€å”®åˆ†æ Agent" çš„ä¿®æ”¹å†å²ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“œ ä¿®æ”¹å†å²                                        â”‚
â”‚                                                     â”‚
â”‚  v1.3 (å½“å‰ç‰ˆæœ¬) - 2024-11-07 10:45               â”‚
â”‚  â€¢ ç§»é™¤äººå·¥å®¡æ‰¹ç¯èŠ‚                                 â”‚
â”‚  â€¢ å¢å¼ºæ•°æ®åˆ†æå¸ˆèƒ½åŠ›ï¼ˆå¼‚å¸¸æ£€æµ‹ï¼‰                   â”‚
â”‚                                                     â”‚
â”‚  v1.2 - 2024-11-07 10:40                           â”‚
â”‚  â€¢ æ·»åŠ é‚®ä»¶é€šçŸ¥åŠŸèƒ½                                 â”‚
â”‚  â€¢ ä¿®æ”¹æ—¶é—´èŒƒå›´ä¸º60å¤©                               â”‚
â”‚                                                     â”‚
â”‚  v1.1 - 2024-11-07 10:35                           â”‚
â”‚  â€¢ æ·»åŠ äººå·¥å®¡æ‰¹ç¯èŠ‚                                 â”‚
â”‚                                                     â”‚
â”‚  v1.0 - 2024-11-07 10:30                           â”‚
â”‚  â€¢ åˆå§‹ç‰ˆæœ¬                                         â”‚
â”‚  â€¢ 3ä¸ª Agentï¼Œé¡ºåºæ‰§è¡Œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½ å¯ä»¥ï¼š
â€¢ "å›åˆ° v1.2" - å›é€€åˆ°æŸä¸ªç‰ˆæœ¬
â€¢ "å¯¹æ¯” v1.0 å’Œ v1.3" - å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬
â€¢ "å‘å¸ƒ v1.3" - å‘å¸ƒå½“å‰ç‰ˆæœ¬

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : å¯¹æ¯” v1.0 å’Œ v1.3

ğŸ¤– åŠ©æ‰‹: è¿™æ˜¯ v1.0 å’Œ v1.3 çš„å¯¹æ¯”ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”                                        â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ v1.0                â”‚ v1.3 (å½“å‰)             â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ æ—¶é—´èŒƒå›´: 30å¤©      â”‚ æ—¶é—´èŒƒå›´: 60å¤© âœ¨       â”‚â”‚
â”‚  â”‚ æ— äººå·¥å®¡æ‰¹          â”‚ æ— äººå·¥å®¡æ‰¹              â”‚â”‚
â”‚  â”‚ æ— é‚®ä»¶é€šçŸ¥          â”‚ æœ‰é‚®ä»¶é€šçŸ¥ âœ¨           â”‚â”‚
â”‚  â”‚ åŸºç¡€æ•°æ®åˆ†æ        â”‚ å¢å¼ºåˆ†æ+å¼‚å¸¸æ£€æµ‹ âœ¨    â”‚â”‚
â”‚  â”‚ 3ä¸ª Agent           â”‚ 3ä¸ª Agent               â”‚â”‚
â”‚  â”‚ é¢„è®¡è€—æ—¶: 30ç§’      â”‚ é¢„è®¡è€—æ—¶: 45ç§’          â”‚â”‚
â”‚  â”‚ é¢„è®¡æˆæœ¬: $0.10     â”‚ é¢„è®¡æˆæœ¬: $0.15         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  ä¸»è¦å˜åŒ–:                                          â”‚
â”‚  âœ¨ æ—¶é—´èŒƒå›´æ‰©å¤§åˆ°60å¤©                              â”‚
â”‚  âœ¨ æ·»åŠ äº†é‚®ä»¶é€šçŸ¥åŠŸèƒ½                              â”‚
â”‚  âœ¨ æ•°æ®åˆ†æèƒ½åŠ›å¢å¼ºï¼ˆå¼‚å¸¸æ£€æµ‹ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : å›åˆ° v1.2

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼å·²å›é€€åˆ° v1.2ã€‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š é”€å”®åˆ†æ Agent (v1.2)                          â”‚
â”‚                                                     â”‚
â”‚  ğŸ¤– Agent 1: æ•°æ®æ”¶é›†å‘˜                            â”‚
â”‚     â€¢ ä»»åŠ¡: æ”¶é›†æœ€è¿‘60å¤©çš„é”€å”®æ•°æ®                 â”‚
â”‚  ğŸ¤– Agent 2: æ•°æ®åˆ†æå¸ˆ                            â”‚
â”‚     â€¢ ä»»åŠ¡: åˆ†ææ•°æ®ï¼Œè¯†åˆ«ç•…é”€äº§å“                 â”‚
â”‚  â¸ï¸  äººå·¥å®¡æ‰¹: ç¡®è®¤åˆ†æç»“æœ                        â”‚
â”‚  ğŸ¤– Agent 3: æŠ¥å‘Šç”Ÿæˆå™¨                            â”‚
â”‚  ğŸ“§ é‚®ä»¶é€šçŸ¥: å‘é€æŠ¥å‘Šåˆ°ä½ çš„é‚®ç®±                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å·²æ¢å¤åˆ° v1.2 çš„é…ç½®ã€‚è¦æµ‹è¯•å—ï¼Ÿ
```

### 4.2 ç‰ˆæœ¬ç®¡ç†å®ç°

```python
class VersionManager:
    """ç‰ˆæœ¬ç®¡ç†å™¨"""
    
    def __init__(self):
        self.versions = []
        self.current_version = None
    
    def save_version(self, config: Dict, description: str = ""):
        """ä¿å­˜æ–°ç‰ˆæœ¬"""
        version = {
            "version": f"v1.{len(self.versions)}",
            "config": copy.deepcopy(config),
            "description": description,
            "timestamp": datetime.now(),
            "changes": self._calculate_changes(config)
        }
        
        self.versions.append(version)
        self.current_version = version
        
        return version
    
    def rollback(self, version_id: str) -> Dict:
        """å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬"""
        version = self._find_version(version_id)
        if version:
            self.current_version = version
            return version["config"]
        return None
    
    def compare_versions(self, v1_id: str, v2_id: str) -> Dict:
        """å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬"""
        v1 = self._find_version(v1_id)
        v2 = self._find_version(v2_id)
        
        if not v1 or not v2:
            return None
        
        diff = {
            "v1": v1,
            "v2": v2,
            "changes": self._diff_configs(v1["config"], v2["config"])
        }
        
        return diff
    
    def get_history(self) -> List[Dict]:
        """è·å–ä¿®æ”¹å†å²"""
        return self.versions
    
    def _calculate_changes(self, config: Dict) -> List[str]:
        """è®¡ç®—å˜æ›´"""
        if not self.versions:
            return ["åˆå§‹ç‰ˆæœ¬"]
        
        last_config = self.versions[-1]["config"]
        changes = []
        
        # å¯¹æ¯”é…ç½®ï¼Œç”Ÿæˆå˜æ›´åˆ—è¡¨
        # ... å®ç°ç»†èŠ‚
        
        return changes
    
    def _diff_configs(self, config1: Dict, config2: Dict) -> Dict:
        """å¯¹æ¯”ä¸¤ä¸ªé…ç½®"""
        # å®ç°é…ç½®å¯¹æ¯”é€»è¾‘
        # ... å®ç°ç»†èŠ‚
        pass
```

## 5. å®æ—¶æµ‹è¯•ä¸æµå¼å“åº”

### 5.1 æµå¼æµ‹è¯•ç•Œé¢

```python
class StreamingTestExecutor:
    """æµå¼æµ‹è¯•æ‰§è¡Œå™¨"""
    
    def __init__(self, websocket):
        self.websocket = websocket
        self.crew = None
    
    async def execute_test(self, config: Dict):
        """æ‰§è¡Œæµ‹è¯•ï¼ˆæµå¼è¿”å›è¿›åº¦ï¼‰"""
        # 1. æ„å»º Crew
        self.crew = self._build_crew(config)
        
        # 2. è®¾ç½®å›è°ƒ
        self.crew.on_task_start = self._on_task_start
        self.crew.on_task_progress = self._on_task_progress
        self.crew.on_task_complete = self._on_task_complete
        self.crew.on_tool_call = self._on_tool_call
        self.crew.on_approval_needed = self._on_approval_needed
        
        # 3. æ‰§è¡Œ
        try:
            result = await self.crew.kickoff_async()
            await self._send_completion(result)
        except Exception as e:
            await self._send_error(e)
    
    async def _on_task_start(self, task: Task):
        """ä»»åŠ¡å¼€å§‹å›è°ƒ"""
        await self.websocket.send_json({
            "type": "task_start",
            "data": {
                "task_name": task.description,
                "agent_role": task.agent.role,
                "timestamp": datetime.now().isoformat()
            }
        })
    
    async def _on_task_progress(self, task: Task, progress: str):
        """ä»»åŠ¡è¿›åº¦å›è°ƒ"""
        await self.websocket.send_json({
            "type": "task_progress",
            "data": {
                "task_name": task.description,
                "progress": progress,
                "timestamp": datetime.now().isoformat()
            }
        })
    
    async def _on_tool_call(self, tool: str, args: Dict):
        """å·¥å…·è°ƒç”¨å›è°ƒ"""
        await self.websocket.send_json({
            "type": "tool_call",
            "data": {
                "tool_name": tool,
                "arguments": args,
                "timestamp": datetime.now().isoformat()
            }
        })
    
    async def _on_approval_needed(self, data: Dict):
        """éœ€è¦å®¡æ‰¹å›è°ƒ"""
        await self.websocket.send_json({
            "type": "approval_needed",
            "data": data
        })
        
        # ç­‰å¾…ç”¨æˆ·å®¡æ‰¹
        approval = await self._wait_for_approval()
        return approval
    
    async def _send_completion(self, result: Any):
        """å‘é€å®Œæˆæ¶ˆæ¯"""
        await self.websocket.send_json({
            "type": "test_complete",
            "data": {
                "result": result,
                "timestamp": datetime.now().isoformat()
            }
        })
```

## 6. åˆ†äº«ä¸åä½œ

### 6.1 åˆ†äº«å¯¹è¯

```
ğŸ‘¤ ä½ : åˆ†äº«ç»™å›¢é˜Ÿ

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼æˆ‘æ¥å¸®ä½ åˆ†äº«è¿™ä¸ª Agentã€‚

ä½ æƒ³æ€ä¹ˆåˆ†äº«ï¼Ÿ
â€¢ åªè¯»æƒé™ - å›¢é˜Ÿæˆå‘˜å¯ä»¥æŸ¥çœ‹å’Œä½¿ç”¨
â€¢ ç¼–è¾‘æƒé™ - å›¢é˜Ÿæˆå‘˜å¯ä»¥ä¿®æ”¹é…ç½®
â€¢ å¤åˆ¶æƒé™ - å›¢é˜Ÿæˆå‘˜å¯ä»¥å¤åˆ¶å¹¶åˆ›å»ºè‡ªå·±çš„ç‰ˆæœ¬

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : åªè¯»æƒé™

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼å·²ç”Ÿæˆåˆ†äº«é“¾æ¥ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”— åˆ†äº«é“¾æ¥                                        â”‚
â”‚                                                     â”‚
â”‚  https://app.example.com/agents/share/abc123       â”‚
â”‚                                                     â”‚
â”‚  æƒé™: åªè¯»                                         â”‚
â”‚  æœ‰æ•ˆæœŸ: æ°¸ä¹…                                       â”‚
â”‚                                                     â”‚
â”‚  [å¤åˆ¶é“¾æ¥] [ç”ŸæˆäºŒç»´ç ] [å‘é€é‚®ä»¶]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å›¢é˜Ÿæˆå‘˜å¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æ¥æŸ¥çœ‹å’Œä½¿ç”¨è¿™ä¸ª Agentã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : å‘å¸ƒåˆ°æ¨¡æ¿å¸‚åœº

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼æˆ‘æ¥å¸®ä½ å‘å¸ƒåˆ°æ¨¡æ¿å¸‚åœºã€‚

è¯·æä¾›ä¸€äº›ä¿¡æ¯ï¼š
â€¢ æ¨¡æ¿åç§°: (é»˜è®¤: é”€å”®åˆ†æ Agent)
â€¢ åˆ†ç±»: æ•°æ®åˆ†æ / ç­–ç•¥è§„åˆ’ / å†…å®¹åˆ›ä½œ / å…¶ä»–
â€¢ ç®€çŸ­æè¿°: (ä¸€å¥è¯ä»‹ç»)
â€¢ é€‚ç”¨åœºæ™¯: (å“ªäº›åœºæ™¯å¯ä»¥ç”¨)

æˆ–è€…ç›´æ¥è¯´ "ä½¿ç”¨é»˜è®¤ä¿¡æ¯"ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ ä½ : ä½¿ç”¨é»˜è®¤ä¿¡æ¯

ğŸ¤– åŠ©æ‰‹: å¥½çš„ï¼æ­£åœ¨å‘å¸ƒåˆ°æ¨¡æ¿å¸‚åœº...

âœ… å·²å‘å¸ƒåˆ°æ¨¡æ¿å¸‚åœºï¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª æ¨¡æ¿å¸‚åœº                                        â”‚
â”‚                                                     â”‚
â”‚  ğŸ“Š é”€å”®åˆ†æ Agent                                  â”‚
â”‚  åˆ†ç±»: æ•°æ®åˆ†æ                                     â”‚
â”‚  æè¿°: è‡ªåŠ¨åˆ†æé”€å”®æ•°æ®ï¼Œè¯†åˆ«ç•…é”€äº§å“å’Œå¼‚å¸¸æƒ…å†µ    â”‚
â”‚  ä½œè€…: ä½                                            â”‚
â”‚  ä½¿ç”¨æ¬¡æ•°: 0                                        â”‚
â”‚  è¯„åˆ†: â­â­â­â­â­ (æš‚æ— è¯„åˆ†)                         â”‚
â”‚                                                     â”‚
â”‚  [æŸ¥çœ‹è¯¦æƒ…] [ç¼–è¾‘] [ä¸‹æ¶]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…¶ä»–ç”¨æˆ·ç°åœ¨å¯ä»¥åœ¨æ¨¡æ¿å¸‚åœºæ‰¾åˆ°å¹¶ä½¿ç”¨ä½ çš„ Agent äº†ï¼
```

## 7. å¯¹è¯ç”Ÿæˆ + å¯è§†åŒ–ä¿®æ”¹ï¼ˆæ··åˆæ¨¡å¼ï¼‰

### 7.1 è®¾è®¡ç†å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ··åˆç¼–è¾‘æ¨¡å¼                                    â”‚
â”‚                                                              â”‚
â”‚  ğŸ’¬ å¯¹è¯æ¨¡å¼ (å¿«é€Ÿåˆ›å»º)                                      â”‚
â”‚     â€¢ ç”¨è‡ªç„¶è¯­è¨€å¿«é€Ÿç”Ÿæˆé…ç½®                                 â”‚
â”‚     â€¢ é€‚åˆä»é›¶å¼€å§‹åˆ›å»º                                       â”‚
â”‚     â€¢ é€‚åˆå¤§å¹…åº¦ä¿®æ”¹                                         â”‚
â”‚                                                              â”‚
â”‚  ğŸ¨ å¯è§†åŒ–æ¨¡å¼ (ç²¾ç»†è°ƒæ•´)                                    â”‚
â”‚     â€¢ ç›´è§‚çš„å›¾å½¢ç•Œé¢                                         â”‚
â”‚     â€¢ é€‚åˆå¾®è°ƒå‚æ•°                                           â”‚
â”‚     â€¢ é€‚åˆæŸ¥çœ‹æ•´ä½“ç»“æ„                                       â”‚
â”‚                                                              â”‚
â”‚  ğŸ”„ æ— ç¼åˆ‡æ¢                                                 â”‚
â”‚     â€¢ å¯¹è¯ç”Ÿæˆåç«‹å³å¯è§†åŒ–ç¼–è¾‘                               â”‚
â”‚     â€¢ å¯è§†åŒ–ç¼–è¾‘æ—¶å¯éšæ—¶åˆ‡æ¢åˆ°å¯¹è¯                           â”‚
â”‚     â€¢ ä¸¤ç§æ¨¡å¼å®æ—¶åŒæ­¥                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 æ··åˆç¼–è¾‘ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š é”€å”®åˆ†æ Agent              [ğŸ’¬ å¯¹è¯] [ğŸ¨ å¯è§†åŒ–] [âš™ï¸]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’¬ å¯¹è¯é¢æ¿        â”‚  â”‚ ğŸ¨ å¯è§†åŒ–ç¼–è¾‘å™¨             â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚ ğŸ‘¤: æ·»åŠ é‚®ä»¶é€šçŸ¥   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”‚ ğŸ¤– æ•°æ®æ”¶é›†å‘˜        â”‚   â”‚   â”‚
â”‚  â”‚ ğŸ¤–: å¥½çš„ï¼å·²æ·»åŠ    â”‚  â”‚  â”‚ â€¢ è§’è‰²: æ•°æ®åˆ†æå¸ˆ   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”‚ â€¢ å·¥å…·: MySQL       â”‚   â”‚   â”‚
â”‚  â”‚ [æ˜¾ç¤ºåœ¨å³ä¾§ â†’]     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚           â†“                 â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”‚ ğŸ¤– æ•°æ®åˆ†æå¸ˆ        â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”‚ [ç‚¹å‡»ç¼–è¾‘]           â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚           â†“                 â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”‚ ğŸ“§ é‚®ä»¶é€šçŸ¥ âœ¨       â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â”‚ [ç‚¹å‡»ç¼–è¾‘]           â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚ [è¾“å…¥æ¶ˆæ¯...]      â”‚  â”‚  [æ‹–æ‹½æ·»åŠ ç»„ä»¶]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å±æ€§é¢æ¿ (ç‚¹å‡»ç»„ä»¶åæ˜¾ç¤º)                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“§ é‚®ä»¶é€šçŸ¥é…ç½®                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  æ”¶ä»¶äºº: [your@email.com      ] [ç¼–è¾‘]        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  ä¸»é¢˜: [é”€å”®åˆ†ææŠ¥å‘Š          ] [ç¼–è¾‘]        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  é™„ä»¶: â˜‘ åŒ…å«æŠ¥å‘Š PDF                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚        â˜‘ åŒ…å«æ•°æ® Excel                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  è§¦å‘: â—‹ æ‰§è¡Œå®Œæˆå                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚        â— å®¡æ‰¹é€šè¿‡å                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ’¬ ä¹Ÿå¯ä»¥å¯¹è¯ä¿®æ”¹:                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  "æ”¹æˆå‘é€åˆ° team@company.com"                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  "ä¸è¦é™„ä»¶"                                    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 å®ç°ï¼šåŒå‘åŒæ­¥

```python
class HybridEditor:
    """æ··åˆç¼–è¾‘å™¨ï¼ˆå¯¹è¯ + å¯è§†åŒ–ï¼‰"""
    
    def __init__(self):
        self.config = {}  # ç»Ÿä¸€çš„é…ç½®æ•°æ®
        self.conversational_orchestrator = ConversationalOrchestrator()
        self.visual_editor = VisualEditor()
        
        # è®¾ç½®åŒå‘åŒæ­¥
        self.conversational_orchestrator.on_config_change = self._sync_to_visual
        self.visual_editor.on_config_change = self._sync_to_conversational
    
    async def handle_chat_input(self, user_input: str) -> Dict:
        """å¤„ç†å¯¹è¯è¾“å…¥"""
        # 1. å¯¹è¯å¼å¤„ç†
        response = await self.conversational_orchestrator.chat(user_input)
        
        # 2. æ›´æ–°é…ç½®
        self.config = response["data"]["config"]
        
        # 3. åŒæ­¥åˆ°å¯è§†åŒ–ç¼–è¾‘å™¨
        await self._sync_to_visual(self.config)
        
        return response
    
    async def handle_visual_edit(self, edit_action: Dict) -> Dict:
        """å¤„ç†å¯è§†åŒ–ç¼–è¾‘"""
        # 1. åº”ç”¨ç¼–è¾‘
        self.visual_editor.apply_edit(edit_action)
        
        # 2. æ›´æ–°é…ç½®
        self.config = self.visual_editor.get_config()
        
        # 3. åŒæ­¥åˆ°å¯¹è¯å†å²ï¼ˆç”Ÿæˆå¯¹è¯æè¿°ï¼‰
        chat_description = await self._generate_chat_description(edit_action)
        await self._sync_to_conversational(self.config, chat_description)
        
        return {
            "success": True,
            "config": self.config
        }
    
    async def _sync_to_visual(self, config: Dict):
        """åŒæ­¥åˆ°å¯è§†åŒ–ç¼–è¾‘å™¨"""
        # æ›´æ–°å¯è§†åŒ–ç¼–è¾‘å™¨çš„æ˜¾ç¤º
        await self.visual_editor.update_from_config(config)
        
        # é«˜äº®æœ€æ–°ä¿®æ”¹çš„éƒ¨åˆ†
        if hasattr(self, '_last_change'):
            await self.visual_editor.highlight_changes(self._last_change)
    
    async def _sync_to_conversational(self, config: Dict, description: str = None):
        """åŒæ­¥åˆ°å¯¹è¯å†å²"""
        # å¦‚æœæœ‰æè¿°ï¼Œæ·»åŠ åˆ°å¯¹è¯å†å²
        if description:
            self.conversational_orchestrator.conversation_history.append({
                "role": "user",
                "content": f"[å¯è§†åŒ–ç¼–è¾‘] {description}",
                "source": "visual_editor"
            })
            
            self.conversational_orchestrator.conversation_history.append({
                "role": "assistant",
                "content": "å¥½çš„ï¼å·²æ›´æ–°é…ç½®ã€‚",
                "source": "visual_editor"
            })
        
        # æ›´æ–°é…ç½®
        self.conversational_orchestrator.current_config = config
    
    async def _generate_chat_description(self, edit_action: Dict) -> str:
        """å°†å¯è§†åŒ–ç¼–è¾‘è½¬æ¢ä¸ºå¯¹è¯æè¿°"""
        # ä½¿ç”¨ LLM ç”Ÿæˆè‡ªç„¶è¯­è¨€æè¿°
        prompt = f"""
å°†å¯è§†åŒ–ç¼–è¾‘æ“ä½œè½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€æè¿°ã€‚

ç¼–è¾‘æ“ä½œ: {json.dumps(edit_action, ensure_ascii=False)}

ç”Ÿæˆç®€çŸ­çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œå°±åƒç”¨æˆ·åœ¨å¯¹è¯ä¸­è¯´çš„ä¸€æ ·ã€‚

ç¤ºä¾‹:
- ç¼–è¾‘æ“ä½œ: {{"type": "update_parameter", "component": "email_notification", "field": "recipient", "value": "team@company.com"}}
  æè¿°: "æŠŠé‚®ä»¶æ”¶ä»¶äººæ”¹æˆ team@company.com"

- ç¼–è¾‘æ“ä½œ: {{"type": "add_component", "component_type": "approval", "position": "after_analysis"}}
  æè¿°: "åœ¨æ•°æ®åˆ†æåæ·»åŠ äººå·¥å®¡æ‰¹"

ç”Ÿæˆæè¿°:
"""
        
        description = await self.conversational_orchestrator.llm.apredict(prompt)
        return description.strip()


class VisualEditor:
    """å¯è§†åŒ–ç¼–è¾‘å™¨"""
    
    def __init__(self):
        self.config = {}
        self.selected_component = None
        self.on_config_change = None  # å›è°ƒå‡½æ•°
    
    def apply_edit(self, edit_action: Dict):
        """åº”ç”¨ç¼–è¾‘æ“ä½œ"""
        action_type = edit_action["type"]
        
        if action_type == "update_parameter":
            self._update_parameter(edit_action)
        elif action_type == "add_component":
            self._add_component(edit_action)
        elif action_type == "remove_component":
            self._remove_component(edit_action)
        elif action_type == "reorder_components":
            self._reorder_components(edit_action)
        elif action_type == "connect_components":
            self._connect_components(edit_action)
        
        # è§¦å‘é…ç½®å˜æ›´å›è°ƒ
        if self.on_config_change:
            self.on_config_change(self.config)
    
    def _update_parameter(self, action: Dict):
        """æ›´æ–°å‚æ•°"""
        component_id = action["component_id"]
        field = action["field"]
        value = action["value"]
        
        # æ‰¾åˆ°ç»„ä»¶
        component = self._find_component(component_id)
        if component:
            component[field] = value
    
    def _add_component(self, action: Dict):
        """æ·»åŠ ç»„ä»¶"""
        component_type = action["component_type"]
        position = action.get("position", "end")
        
        # åˆ›å»ºæ–°ç»„ä»¶
        new_component = self._create_component(component_type)
        
        # æ·»åŠ åˆ°é…ç½®
        if position == "end":
            self.config["components"].append(new_component)
        else:
            # æ’å…¥åˆ°æŒ‡å®šä½ç½®
            insert_index = self._calculate_insert_index(position)
            self.config["components"].insert(insert_index, new_component)
    
    async def update_from_config(self, config: Dict):
        """ä»é…ç½®æ›´æ–°æ˜¾ç¤º"""
        self.config = config
        
        # é‡æ–°æ¸²æŸ“ç”»å¸ƒ
        await self._render_canvas()
    
    async def highlight_changes(self, changes: Dict):
        """é«˜äº®æ˜¾ç¤ºå˜æ›´"""
        # å®ç°é«˜äº®åŠ¨ç”»
        # ... UI å®ç°
        pass
    
    def get_config(self) -> Dict:
        """è·å–å½“å‰é…ç½®"""
        return self.config
```

### 7.4 ä½¿ç”¨åœºæ™¯

#### åœºæ™¯ 1ï¼šå¯¹è¯åˆ›å»º â†’ å¯è§†åŒ–å¾®è°ƒ

```
æ­¥éª¤ 1: å¯¹è¯å¿«é€Ÿåˆ›å»º
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤: åˆ›å»ºä¸€ä¸ªé”€å”®åˆ†æ Agentï¼Œåˆ†ææœ€è¿‘30å¤©æ•°æ®
ğŸ¤–: [ç”Ÿæˆé…ç½®] å·²åˆ›å»ºï¼

æ­¥éª¤ 2: åˆ‡æ¢åˆ°å¯è§†åŒ–æ¨¡å¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[ç‚¹å‡» "ğŸ¨ å¯è§†åŒ–" æŒ‰é’®]

æ­¥éª¤ 3: å¯è§†åŒ–å¾®è°ƒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ ç‚¹å‡» "æ•°æ®åˆ†æå¸ˆ" Agent
â€¢ åœ¨å±æ€§é¢æ¿ä¸­è°ƒæ•´æ¸©åº¦å‚æ•°: 0.7 â†’ 0.5
â€¢ æ·»åŠ ä¸€ä¸ªå·¥å…·: "å¼‚å¸¸æ£€æµ‹"
â€¢ æ‹–æ‹½è°ƒæ•´ç»„ä»¶é¡ºåº

æ­¥éª¤ 4: ä¿å­˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[ç‚¹å‡»ä¿å­˜] â†’ è‡ªåŠ¨åŒæ­¥åˆ°å¯¹è¯å†å²
```

#### åœºæ™¯ 2ï¼šå¯è§†åŒ–ç¼–è¾‘ â†’ å¯¹è¯ç»§ç»­

```
æ­¥éª¤ 1: å¯è§†åŒ–ç¼–è¾‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[åœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­]
â€¢ ç‚¹å‡»æ·»åŠ  "é‚®ä»¶é€šçŸ¥" ç»„ä»¶
â€¢ é…ç½®æ”¶ä»¶äººã€ä¸»é¢˜ç­‰

æ­¥éª¤ 2: åˆ‡æ¢å›å¯¹è¯æ¨¡å¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[ç‚¹å‡» "ğŸ’¬ å¯¹è¯" æŒ‰é’®]

å¯¹è¯å†å²è‡ªåŠ¨æ˜¾ç¤º:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤: [å¯è§†åŒ–ç¼–è¾‘] æ·»åŠ äº†é‚®ä»¶é€šçŸ¥
ğŸ¤–: å¥½çš„ï¼å·²æ›´æ–°é…ç½®ã€‚

æ­¥éª¤ 3: ç»§ç»­å¯¹è¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤: æŠŠé‚®ä»¶æ”¹æˆå‘é€ç»™æ•´ä¸ªå›¢é˜Ÿ
ğŸ¤–: å¥½çš„ï¼å·²ä¿®æ”¹æ”¶ä»¶äººä¸ºå›¢é˜Ÿé‚®ç®±ã€‚
```

#### åœºæ™¯ 3ï¼šå®æ—¶åŒå‘åŒæ­¥

```
å·¦ä¾§å¯¹è¯é¢æ¿                    å³ä¾§å¯è§†åŒ–ç¼–è¾‘å™¨
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤: æ·»åŠ äººå·¥å®¡æ‰¹                [å®æ—¶æ˜¾ç¤º]
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
ğŸ¤–: å¥½çš„ï¼å·²æ·»åŠ       â†’         â”‚ â¸ï¸ äººå·¥å®¡æ‰¹  â”‚ â† é«˜äº®é—ªçƒ
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[åœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­ç‚¹å‡»åˆ é™¤]
                                [ç»„ä»¶æ¶ˆå¤±]
                    â†           
[å¯¹è¯å†å²è‡ªåŠ¨æ›´æ–°]
ğŸ‘¤: [å¯è§†åŒ–ç¼–è¾‘] åˆ é™¤äº†äººå·¥å®¡æ‰¹
ğŸ¤–: å¥½çš„ï¼å·²æ›´æ–°é…ç½®ã€‚
```

### 7.5 æ™ºèƒ½è¾…åŠ©åŠŸèƒ½

```python
class SmartAssistant:
    """æ™ºèƒ½è¾…åŠ©ï¼ˆåœ¨å¯è§†åŒ–ç¼–è¾‘æ—¶æä¾›å¯¹è¯å»ºè®®ï¼‰"""
    
    async def suggest_improvements(self, config: Dict) -> List[str]:
        """åˆ†æé…ç½®ï¼Œæä¾›æ”¹è¿›å»ºè®®"""
        suggestions = []
        
        # 1. åˆ†æé…ç½®
        analysis = await self._analyze_config(config)
        
        # 2. ç”Ÿæˆå»ºè®®
        if analysis["missing_error_handling"]:
            suggestions.append("ğŸ’¡ å»ºè®®æ·»åŠ é”™è¯¯å¤„ç†æœºåˆ¶")
        
        if analysis["can_parallelize"]:
            suggestions.append("ğŸ’¡ è¿™äº›ä»»åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæå‡é€Ÿåº¦")
        
        if analysis["missing_notification"]:
            suggestions.append("ğŸ’¡ å»ºè®®æ·»åŠ æ‰§è¡Œå®Œæˆé€šçŸ¥")
        
        return suggestions
    
    async def auto_optimize(self, config: Dict) -> Dict:
        """è‡ªåŠ¨ä¼˜åŒ–é…ç½®"""
        # ä½¿ç”¨ LLM åˆ†æå¹¶ä¼˜åŒ–é…ç½®
        prompt = f"""
åˆ†æè¿™ä¸ª Agent é…ç½®ï¼Œæä¾›ä¼˜åŒ–å»ºè®®ã€‚

é…ç½®: {json.dumps(config, ensure_ascii=False)}

è¯·åˆ†æ:
1. æ˜¯å¦æœ‰å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡
2. æ˜¯å¦ç¼ºå°‘é”™è¯¯å¤„ç†
3. æ˜¯å¦éœ€è¦æ·»åŠ é€šçŸ¥
4. å·¥å…·é…ç½®æ˜¯å¦åˆç†
5. å‚æ•°è®¾ç½®æ˜¯å¦æœ€ä¼˜

è¿”å›ä¼˜åŒ–åçš„é…ç½®å’Œä¼˜åŒ–è¯´æ˜ã€‚
"""
        
        response = await self.llm.apredict(prompt)
        return json.loads(response)
```

### 7.6 ç•Œé¢åˆ‡æ¢åŠ¨ç”»

```
å¯¹è¯æ¨¡å¼ â†â†’ å¯è§†åŒ–æ¨¡å¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

åˆ‡æ¢åˆ°å¯è§†åŒ–:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ å¯¹è¯é¢æ¿    â”‚  â†’      â”‚ ğŸ’¬ â”‚ ğŸ¨ ç”»å¸ƒ   â”‚
â”‚                â”‚         â”‚    â”‚           â”‚
â”‚ [å¯¹è¯å†…å®¹]     â”‚         â”‚ æŠ˜å â”‚ [å¯è§†åŒ–]  â”‚
â”‚                â”‚         â”‚    â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ‡æ¢åˆ°å¯¹è¯:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ â”‚ ğŸ¨ ç”»å¸ƒ   â”‚  â†’      â”‚ ğŸ’¬ å¯¹è¯é¢æ¿    â”‚
â”‚    â”‚           â”‚         â”‚                â”‚
â”‚ æŠ˜å â”‚ [å¯è§†åŒ–]  â”‚         â”‚ [å¯¹è¯å†…å®¹]     â”‚
â”‚    â”‚           â”‚         â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ†å±æ¨¡å¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ å¯¹è¯ (40%)    â”‚ ğŸ¨ å¯è§†åŒ– (60%)      â”‚
â”‚                  â”‚                       â”‚
â”‚ [å¯¹è¯å†…å®¹]       â”‚ [ç”»å¸ƒ]                â”‚
â”‚                  â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.7 å¿«æ·æ“ä½œ

```
åœ¨å¯è§†åŒ–æ¨¡å¼ä¸‹ï¼Œæ”¯æŒå¿«æ·å¯¹è¯:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ–¹å¼ 1: å³é”®èœå•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[å³é”®ç‚¹å‡»ç»„ä»¶]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¾‘                â”‚
â”‚ åˆ é™¤                â”‚
â”‚ å¤åˆ¶                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸ’¬ å¯¹è¯ä¿®æ”¹...      â”‚ â† æ‰“å¼€å¿«æ·å¯¹è¯æ¡†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ–¹å¼ 2: å¿«æ·é”®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Ctrl + K : æ‰“å¼€å¿«æ·å¯¹è¯æ¡†
Ctrl + / : åˆ‡æ¢å¯¹è¯/å¯è§†åŒ–æ¨¡å¼
Ctrl + Space : AI å»ºè®®

æ–¹å¼ 3: æ‚¬æµ®å¯¹è¯æ¡†
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[é€‰ä¸­ç»„ä»¶å]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– æ•°æ®åˆ†æå¸ˆ                   â”‚
â”‚                                  â”‚
â”‚ ğŸ’¬ å¿«æ·ä¿®æ”¹:                     â”‚
â”‚ [è®©å®ƒæ›´æ™ºèƒ½]                     â”‚
â”‚ [æ·»åŠ å¼‚å¸¸æ£€æµ‹]                   â”‚
â”‚ [æ”¹ç”¨ GPT-4]                     â”‚
â”‚                                  â”‚
â”‚ æˆ–è¾“å…¥: [________________] [â†’]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.8 å®æ—¶åä½œ

```python
class CollaborativeEditor:
    """åä½œç¼–è¾‘å™¨"""
    
    def __init__(self):
        self.active_users = {}
        self.lock_manager = LockManager()
    
    async def handle_user_edit(self, user_id: str, edit_action: Dict):
        """å¤„ç†ç”¨æˆ·ç¼–è¾‘"""
        # 1. æ£€æŸ¥é”å®š
        if self.lock_manager.is_locked(edit_action["component_id"]):
            return {"error": "ç»„ä»¶æ­£åœ¨è¢«å…¶ä»–ç”¨æˆ·ç¼–è¾‘"}
        
        # 2. åŠ é”
        self.lock_manager.lock(edit_action["component_id"], user_id)
        
        # 3. åº”ç”¨ç¼–è¾‘
        result = await self.apply_edit(edit_action)
        
        # 4. å¹¿æ’­ç»™å…¶ä»–ç”¨æˆ·
        await self.broadcast_edit(edit_action, exclude=user_id)
        
        # 5. è§£é”
        self.lock_manager.unlock(edit_action["component_id"])
        
        return result
    
    async def broadcast_edit(self, edit_action: Dict, exclude: str = None):
        """å¹¿æ’­ç¼–è¾‘åˆ°å…¶ä»–ç”¨æˆ·"""
        for user_id, websocket in self.active_users.items():
            if user_id != exclude:
                await websocket.send_json({
                    "type": "remote_edit",
                    "data": edit_action
                })
```

## 8. æ€»ç»“

### 8.1 æ ¸å¿ƒä¼˜åŠ¿

| ç‰¹æ€§ | çº¯å¯¹è¯ | çº¯å¯è§†åŒ– | **æ··åˆæ¨¡å¼** âœ… |
|------|--------|---------|----------------|
| **å¿«é€Ÿåˆ›å»º** | âœ… ä¼˜ç§€ | âš ï¸ è¾ƒæ…¢ | âœ… ä¼˜ç§€ |
| **ç²¾ç»†è°ƒæ•´** | âš ï¸ ä¸å¤Ÿç²¾ç¡® | âœ… ä¼˜ç§€ | âœ… ä¼˜ç§€ |
| **å­¦ä¹ æˆæœ¬** | âœ… é›¶å­¦ä¹  | âš ï¸ éœ€è¦å­¦ä¹  | âœ… é›¶å­¦ä¹  |
| **çµæ´»æ€§** | âœ… å¾ˆçµæ´» | âœ… å¾ˆçµæ´» | âœ… æœ€çµæ´» |
| **æ•´ä½“è§†å›¾** | âŒ æ²¡æœ‰ | âœ… æ¸…æ™° | âœ… æ¸…æ™° |

### 8.2 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ··åˆç¼–è¾‘æ¶æ„                              â”‚
â”‚                                                              â”‚
â”‚  å‰ç«¯å±‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¯¹è¯ç•Œé¢           â”‚  â”‚ å¯è§†åŒ–ç¼–è¾‘å™¨                â”‚   â”‚
â”‚  â”‚ (React)            â”‚  â”‚ (React Flow)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                         â”‚                       â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                      â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ··åˆç¼–è¾‘å™¨ (HybridEditor)                           â”‚  â”‚
â”‚  â”‚  â€¢ ç»Ÿä¸€é…ç½®ç®¡ç†                                      â”‚  â”‚
â”‚  â”‚  â€¢ åŒå‘åŒæ­¥                                          â”‚  â”‚
â”‚  â”‚  â€¢ å†²çªè§£å†³                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â†“                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯¹è¯ç†è§£å±‚ (GPT-4)                                  â”‚  â”‚
â”‚  â”‚  â€¢ æ„å›¾è¯†åˆ«                                          â”‚  â”‚
â”‚  â”‚  â€¢ å‚æ•°æå–                                          â”‚  â”‚
â”‚  â”‚  â€¢ é…ç½®ç”Ÿæˆ                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â†“                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Crew æ„å»ºå±‚ (Crew AI)                               â”‚  â”‚
â”‚  â”‚  â€¢ Agent åˆ›å»º                                        â”‚  â”‚
â”‚  â”‚  â€¢ Task ç¼–æ’                                         â”‚  â”‚
â”‚  â”‚  â€¢ Flow æ§åˆ¶                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â†“                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ‰§è¡Œå¼•æ“ (Python + MCP)                             â”‚  â”‚
â”‚  â”‚  â€¢ æœ¬åœ°å·¥å…·è°ƒç”¨                                      â”‚  â”‚
â”‚  â”‚  â€¢ å®æ—¶è¿›åº¦æ¨é€                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 å®æ–½è·¯çº¿

**Phase 1: å¯¹è¯å¼ç¼–æ’åŸºç¡€ (4å‘¨)**
- [ ] å¯¹è¯å¼åˆ›å»º
- [ ] é…ç½®ç”Ÿæˆ
- [ ] åŸºç¡€æµ‹è¯•
- [ ] ç®€å•å‘å¸ƒ

**Phase 2: å¯è§†åŒ–ç¼–è¾‘å™¨ (4å‘¨)**
- [ ] ç”»å¸ƒæ¸²æŸ“
- [ ] ç»„ä»¶æ‹–æ‹½
- [ ] å±æ€§ç¼–è¾‘
- [ ] å®æ—¶é¢„è§ˆ

**Phase 3: æ··åˆæ¨¡å¼ (3å‘¨)** â­ **æ ¸å¿ƒ**
- [ ] åŒå‘åŒæ­¥æœºåˆ¶
- [ ] å¯¹è¯ â†” å¯è§†åŒ–åˆ‡æ¢
- [ ] ç¼–è¾‘å†å²ç»Ÿä¸€
- [ ] å†²çªè§£å†³

**Phase 4: é«˜çº§åŠŸèƒ½ (3å‘¨)**
- [ ] ç‰ˆæœ¬ç®¡ç†
- [ ] æ™ºèƒ½å»ºè®®
- [ ] å®æ—¶åä½œ
- [ ] æ¨¡æ¿å¸‚åœº

### 8.4 å…³é”®å®ç°ç»†èŠ‚

#### 1. åŒå‘åŒæ­¥çš„æ ¸å¿ƒ

```python
# å…³é”®ï¼šç»Ÿä¸€çš„é…ç½®æ•°æ®ç»“æ„
config = {
    "id": "agent_001",
    "name": "é”€å”®åˆ†æ Agent",
    "version": "v1.0",
    "agents": [...],
    "tasks": [...],
    "flows": [...],
    "metadata": {
        "created_by": "conversational",  # æˆ– "visual"
        "last_modified_by": "visual",
        "last_modified_at": "2024-11-07T10:30:00"
    }
}

# ä»»ä½•ä¿®æ”¹éƒ½é€šè¿‡è¿™ä¸ªç»Ÿä¸€çš„é…ç½®
# å¯¹è¯ä¿®æ”¹ â†’ æ›´æ–° config â†’ åŒæ­¥åˆ°å¯è§†åŒ–
# å¯è§†åŒ–ä¿®æ”¹ â†’ æ›´æ–° config â†’ åŒæ­¥åˆ°å¯¹è¯å†å²
```

#### 2. ç¼–è¾‘æ“ä½œçš„æŠ½è±¡

```python
# æ‰€æœ‰ç¼–è¾‘æ“ä½œéƒ½æŠ½è±¡ä¸ºç»Ÿä¸€çš„æ ¼å¼
edit_action = {
    "type": "update_parameter",  # æ“ä½œç±»å‹
    "component_id": "agent_1",   # ç›®æ ‡ç»„ä»¶
    "field": "temperature",      # å­—æ®µ
    "old_value": 0.7,           # æ—§å€¼
    "new_value": 0.5,           # æ–°å€¼
    "source": "visual",         # æ¥æº
    "timestamp": "..."
}

# è¿™æ ·å¯¹è¯å’Œå¯è§†åŒ–éƒ½èƒ½ç†è§£å’Œå¤„ç†
```

#### 3. æ™ºèƒ½è½¬æ¢

```python
# å¯¹è¯ â†’ å¯è§†åŒ–ï¼šç›´æ¥æ¸²æŸ“é…ç½®
async def sync_to_visual(config):
    await visual_editor.render(config)
    await visual_editor.highlight_latest_changes()

# å¯è§†åŒ– â†’ å¯¹è¯ï¼šç”Ÿæˆè‡ªç„¶è¯­è¨€æè¿°
async def sync_to_conversational(edit_action):
    description = await llm.generate_description(edit_action)
    # "æŠŠæ¸©åº¦å‚æ•°ä» 0.7 æ”¹æˆ 0.5"
    
    conversational_history.append({
        "user": f"[å¯è§†åŒ–ç¼–è¾‘] {description}",
        "assistant": "å¥½çš„ï¼å·²æ›´æ–°é…ç½®ã€‚"
    })
```

### 8.5 ç”¨æˆ·ä½“éªŒè®¾è®¡

#### æ— ç¼åˆ‡æ¢

```
ç”¨æˆ·æ„ŸçŸ¥ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ åœ¨å¯¹è¯ä¸­è¯´ "æ·»åŠ é‚®ä»¶é€šçŸ¥"
  â†’ å³ä¾§å¯è§†åŒ–ç«‹å³å‡ºç°æ–°ç»„ä»¶ï¼ˆå¸¦é«˜äº®åŠ¨ç”»ï¼‰

â€¢ åœ¨å¯è§†åŒ–ä¸­ç‚¹å‡»åˆ é™¤ç»„ä»¶
  â†’ å·¦ä¾§å¯¹è¯å†å²è‡ªåŠ¨è®°å½• "[å¯è§†åŒ–ç¼–è¾‘] åˆ é™¤äº†..."

â€¢ åˆ‡æ¢æ¨¡å¼æ—¶ï¼Œç„¦ç‚¹è‡ªåŠ¨å®šä½åˆ°æœ€æ–°ä¿®æ”¹çš„ä½ç½®

â€¢ ä¸¤è¾¹å§‹ç»ˆä¿æŒåŒæ­¥ï¼Œæ²¡æœ‰ä»»ä½•å»¶è¿Ÿæ„Ÿ
```

#### æ™ºèƒ½æç¤º

```
åœ¨å¯è§†åŒ–ç¼–è¾‘æ—¶ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¡ æç¤ºï¼šä½ ä¹Ÿå¯ä»¥è¯´ "æŠŠè¿™ä¸ªæ”¹æˆ..."
ğŸ’¡ æç¤ºï¼šæŒ‰ Ctrl+K å¿«é€Ÿå¯¹è¯ä¿®æ”¹
ğŸ’¡ å»ºè®®ï¼šè¿™ä¸¤ä¸ªä»»åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œ

åœ¨å¯¹è¯æ—¶ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¡ æç¤ºï¼šç‚¹å‡»å³ä¾§æŸ¥çœ‹å¯è§†åŒ–ç»“æ„
ğŸ’¡ æç¤ºï¼šä½ å¯ä»¥ç›´æ¥åœ¨ç”»å¸ƒä¸Šæ‹–æ‹½è°ƒæ•´
```

### 8.6 æœ€ä½³å®è·µ

#### æ¨èå·¥ä½œæµ

```
1. å¿«é€Ÿåˆ›å»ºé˜¶æ®µ â†’ ä½¿ç”¨å¯¹è¯
   "åˆ›å»ºä¸€ä¸ªé”€å”®åˆ†æ Agent..."
   
2. ç²¾ç»†è°ƒæ•´é˜¶æ®µ â†’ åˆ‡æ¢åˆ°å¯è§†åŒ–
   è°ƒæ•´å‚æ•°ã€æ·»åŠ å·¥å…·ã€ä¼˜åŒ–æµç¨‹
   
3. å¤§å¹…ä¿®æ”¹é˜¶æ®µ â†’ åˆ‡æ¢å›å¯¹è¯
   "æŠŠæ•´ä¸ªæµç¨‹æ”¹æˆå¹¶è¡Œæ‰§è¡Œ"
   
4. æœ€ç»ˆæ£€æŸ¥é˜¶æ®µ â†’ ä½¿ç”¨å¯è§†åŒ–
   æŸ¥çœ‹æ•´ä½“ç»“æ„ï¼Œç¡®è®¤æ— è¯¯
```

#### å›¢é˜Ÿåä½œåœºæ™¯

```
åœºæ™¯ 1: è¿è¥åˆ›å»ºï¼Œå¼€å‘ä¼˜åŒ–
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
è¿è¥: ç”¨å¯¹è¯å¿«é€Ÿåˆ›å»ºåŸºç¡€æµç¨‹
å¼€å‘: åˆ‡æ¢åˆ°å¯è§†åŒ–ï¼Œä¼˜åŒ–æŠ€æœ¯ç»†èŠ‚ï¼ˆå‚æ•°ã€å·¥å…·ç­‰ï¼‰

åœºæ™¯ 2: å®æ—¶åä½œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç”¨æˆ·A: åœ¨å¯¹è¯ä¸­ä¿®æ”¹
ç”¨æˆ·B: åœ¨å¯è§†åŒ–ä¸­çœ‹åˆ°å®æ—¶æ›´æ–°
ä¸¤äººå¯ä»¥åŒæ—¶å·¥ä½œï¼Œç³»ç»Ÿè‡ªåŠ¨åè°ƒ
```

---

## 9. æœ€ç»ˆæ€»ç»“

### 9.1 å®Œæ•´èƒ½åŠ›çŸ©é˜µ

| èƒ½åŠ› | çº¯å¯¹è¯ | çº¯å¯è§†åŒ– | **æ··åˆæ¨¡å¼** âœ… |
|------|--------|---------|----------------|
| **å¿«é€Ÿåˆ›å»º** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­â­ |
| **ç²¾ç»†è°ƒæ•´** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **æ•´ä½“è§†å›¾** | â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **å­¦ä¹ æˆæœ¬** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­â­ |
| **çµæ´»æ€§** | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| **åä½œæ€§** | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |

### 9.2 æ ¸å¿ƒä»·å€¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ··åˆæ¨¡å¼çš„æ ¸å¿ƒä»·å€¼                              â”‚
â”‚                                                              â”‚
â”‚  ğŸš€ æ•ˆç‡æå‡                                                 â”‚
â”‚     â€¢ å¯¹è¯å¿«é€Ÿåˆ›å»º: 2-3åˆ†é’Ÿ                                  â”‚
â”‚     â€¢ å¯è§†åŒ–ç²¾è°ƒ: 30ç§’                                       â”‚
â”‚     â€¢ æ€»ä½“æå‡: 10x                                          â”‚
â”‚                                                              â”‚
â”‚  ğŸ¯ é™ä½é—¨æ§›                                                 â”‚
â”‚     â€¢ è¿è¥äººå‘˜: ç”¨å¯¹è¯å³å¯                                   â”‚
â”‚     â€¢ æŠ€æœ¯äººå‘˜: å¯ç”¨å¯è§†åŒ–ç²¾è°ƒ                               â”‚
â”‚     â€¢ å­¦ä¹ æˆæœ¬: æ¥è¿‘é›¶                                       â”‚
â”‚                                                              â”‚
â”‚  ğŸ”„ æœ€å¤§çµæ´»æ€§                                               â”‚
â”‚     â€¢ éšæ—¶åˆ‡æ¢æ¨¡å¼                                           â”‚
â”‚     â€¢ å„å–æ‰€é•¿                                               â”‚
â”‚     â€¢ é€‚åº”ä¸åŒåœºæ™¯                                           â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘¥ å›¢é˜Ÿåä½œ                                                 â”‚
â”‚     â€¢ ä¸åŒè§’è‰²ä¸åŒæ–¹å¼                                       â”‚
â”‚     â€¢ å®æ—¶åŒæ­¥                                               â”‚
â”‚     â€¢ æ— ç¼é…åˆ                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 æŠ€æœ¯åˆ›æ–°ç‚¹

1. **åŒå‘åŒæ­¥æœºåˆ¶**ï¼šå¯¹è¯å’Œå¯è§†åŒ–å®æ—¶åŒæ­¥ï¼Œæ— ç¼åˆ‡æ¢
2. **æ™ºèƒ½è½¬æ¢**ï¼šå¯è§†åŒ–æ“ä½œè‡ªåŠ¨ç”Ÿæˆå¯¹è¯æè¿°
3. **ç»Ÿä¸€é…ç½®æ¨¡å‹**ï¼šä¸€ä»½é…ç½®ï¼Œä¸¤ç§è§†å›¾
4. **ä¸Šä¸‹æ–‡ä¿æŒ**ï¼šåˆ‡æ¢æ¨¡å¼æ—¶ä¿æŒç¼–è¾‘ä¸Šä¸‹æ–‡
5. **åä½œå‹å¥½**ï¼šæ”¯æŒå¤šäººåŒæ—¶ä½¿ç”¨ä¸åŒæ¨¡å¼ç¼–è¾‘

---

**è¿™å°±æ˜¯çœŸæ­£çš„"æ··åˆç¼–æ’"ï¼æ—¢æœ‰å¯¹è¯çš„ä¾¿æ·ï¼Œåˆæœ‰å¯è§†åŒ–çš„ç›´è§‚ï¼Œç»™ç”¨æˆ·æœ€å¤§çš„è‡ªç”±åº¦ï¼** ğŸ‰

